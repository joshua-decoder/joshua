# this is an example Thrax configuration file
# <- this symbol indicates a comment
# each line should be a key-value pair separated by whitespace

###
### GRAMMAR OPTIONS
###

grammar     samt   # or hiero
reverse     false
source-is-parsed    false
target-is-parsed    true
target-is-samt-syntax   true
unary-category-handler  bottom
allow-double-plus   false
default-nt    OOV

min-rule-count 1

# number of reducers
reducers 16

# not only do these next six options have the suggested values as given
# in Chiang's "Hierarchical Phrase-based Translation" (CL), they are also
# Thrax's default values! You could comment them out and the resulting grammar
# would be identical.

# maximum length of initial phrase pairs
initial-phrase-length   12
lex-source-words        10
lex-target-words        10

# maximum number of NTs in a rule
arity                   2   

# minimum number of aligned terminals in a rule
lexicality              0   

# allow adjacent nonterminals on source side
adjacent-nts    true   

# allow unaligned words at boundaries of phrases
loose           true   

allow-abstract-rules    false
allow-nonlexical-x      false
allow-full-sentence-rules   true

nonlex-source-length    5
nonlex-target-length    5
nonlex-source-words     5
nonlex-target-words     5

rule-span-limit         12

phrase-penalty  2.718

# a whitespace seperated list of features
# in this example, the features are phrase translation probability,
# lexical probability, and phrase penalty
# features        phrase-penalty e2fphrase f2ephrase lexprob lexical abstract adjacent x-rule source-terminals-without-target target-terminals-without-source monotonic glue-rule rarity target-word-count unaligned-count
#features        e_given_f_phrase f_given_e_phrase e_given_f_lex f_given_e_lex rarity phrase-penalty
features        e2fphrase f2ephrase lexprob phrase-penalty rarity lexical abstract adjacent x-rule source-terminals-without-target target-terminals-without-source monotonic target-word-count unaligned-count

# the only option and default later we will want to add formats for other decoders such as moses and
# cdec, if they use other formats
output-format   joshua  

# label feature scores? each score will be output as name=score
label-feature-scores false   

amazon-work s3://edu.jhu.cs.jonny/wmt11_3/fr-en/samt
amazon-jar  s3://edu.jhu.cs.jonny/thrax.jar
amazon-num-instances    10
amazon-instance-type    m2.xlarge

max-split-size  8388608

# the format should be:
# foreign sentence ||| english sentence ||| alignment
# where the english is either parsed or not depending on whether you want
# SAMT or you want Hiero.
#input-file  s3://edu.jhu.cs.jonny/wmt11/corpus.fr-en
